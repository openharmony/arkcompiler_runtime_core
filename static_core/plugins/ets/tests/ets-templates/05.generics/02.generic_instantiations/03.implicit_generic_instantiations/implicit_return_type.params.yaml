# Copyright (c) 2026 Huawei Device Co., Ltd.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

---
cases:
    - decl: |-
          function foo<T>(a: T, b: T): Array<T> {
              return [a, b]
          }
      use: |-
          let arr = foo(1.0, 2.0)
          arktest.assertTrue(arr instanceof Array)
          arktest.assertTrue(arr[0] instanceof number && arr[1] instanceof number)
          arktest.assertEQ(arr[0], 1.0)
          arktest.assertEQ(arr[1], 2.0)
    - decl: |-
          function foo<T>(a: T, b: T): Array<T> {
              return [a, b]
          }
      use: |-
          let arr = foo(c'1', c'2')
          arktest.assertTrue(arr instanceof Array)
          arktest.assertTrue(arr[0] instanceof char && arr[1] instanceof char)
          arktest.assertEQ(arr[0], c'1')
          arktest.assertEQ(arr[1], c'2')
    - decl: |-
          function foo<T>(a: T, b: T): Array<T> {
              return [a, b]
          }
      use: |-
          let arr = foo(true, false)
          arktest.assertTrue(arr instanceof Array)
          arktest.assertTrue(arr[0] instanceof boolean && arr[1] instanceof boolean)
          arktest.assertEQ(arr[0], true)
          arktest.assertEQ(arr[1], false)
    - decl: |-
          function foo<T>(a: T, b: T): T[] {
              return [a, b]
          }
      use: |-
          let arr = foo(128, 256)
          arktest.assertTrue(arr instanceof Array)
          arktest.assertTrue(arr[0] instanceof int && arr[1] instanceof int)
          arktest.assertEQ(arr[0], 128)
          arktest.assertEQ(arr[1], 256)
    - decl: |-
          function foo<T>(a: T, b: T): T[] {
              return [a, b]
          }
      use: |-
          let arr = foo(c'1', c'2')
          arktest.assertTrue(arr instanceof Array)
          arktest.assertTrue(arr[0] instanceof char && arr[1] instanceof char)
          arktest.assertEQ(arr[0], c'1')
          arktest.assertEQ(arr[1], c'2')
    - decl: |-
          function foo<T>(a: T, b: T): T[] {
              return [a, b]
          }
      use: |-
          let arr = foo(true, false)
          arktest.assertTrue(arr instanceof Array)
          arktest.assertTrue(arr[0] instanceof boolean && arr[1] instanceof boolean)
          arktest.assertEQ(arr[0], true)
          arktest.assertEQ(arr[1], false)
    - decl: |-
          function foo<T, U>(a: T, b: U): [T, U, Array<T|U>] {
              return [a, b, [a, b]]
          }
      use: |-
          let tup = foo("str", 42.0)
          arktest.assertTrue(tup instanceof Object)
          arktest.assertTrue(tup[0] instanceof string && tup[1] instanceof number)
          arktest.assertTrue(tup[2][0] instanceof string && tup[2][1] instanceof number)
          arktest.assertEQ(tup[0], "str")
          arktest.assertEQ(tup[1], 42.0)
          arktest.assertEQ(tup[2][0], "str")
          arktest.assertEQ(tup[2][1], 42.0)

    - decl: |-
          function foo<S, T, U>(a: T, b: U, c: S): S|T|U {
              return a
          }
      use: |-
          let val = foo(1, [1.0, 2.0, 3.4, 4.5], 'abc')
          arktest.assertEQ(val, 1)
    - decl: |-
          function foo<S, T, U>(a: T, b: U, c: S): S|T|U {
              return b
          }
      use: |-
          let val = foo(1, [1.0, 2.0, 3.4, 4.5], 'abc')
          arktest.assertTrue(val instanceof Array)
    - decl: |-
          function foo<S, T, U>(a: T, b: U, c: S): S|T|U {
              return c
          }
      use: |-
          let val = foo(1, [1.0, 2.0, 3.4, 4.5], 'abc')
          arktest.assertEQ(val, 'abc')
    - decl: |-
          function foo<T>(a: T, b: T): Array<Array<T>> {
              return [[a, b], [a, b], [a, b]]
          }
      use: |-          
          let arr = foo(1.0, 2.0)
          arktest.assertTrue(arr instanceof Array)
          arktest.assertTrue(arr[0][0] instanceof number && arr[2][1] instanceof number)
          arktest.assertEQ(arr[0][0], 1.0)
          arktest.assertEQ(arr[2][1], 2.0)
    - decl: |-
          function foo<T>(a: T, b: T): Array<Array<T>> {
              return [[a, b], [a, b], [a, b]]
          }
      use: |-          
          let arr = foo(c'1', c'2')
          arktest.assertTrue(arr instanceof Array)
          arktest.assertTrue(arr[0][0] instanceof char && arr[2][1] instanceof char)
          arktest.assertEQ(arr[0][0], c'1')
          arktest.assertEQ(arr[2][1], c'2')
    - decl: |-
          function foo<T>(a: T, b: T): Array<Array<T>> {
              return [[a, b], [a, b], [a, b]]
          }
      use: |-
          let arr = foo(true, false)
          arktest.assertTrue(arr instanceof Array)
          arktest.assertTrue(arr[0][0] instanceof boolean && arr[2][1] instanceof boolean)
          arktest.assertEQ(arr[0][0], true)
          arktest.assertEQ(arr[2][1], false)
    - decl: |-
          function foo<T>(a: T, b: T): T[][] {
              return [[a, b], [a, b], [a, b]]
          }
      use: |-          
          let arr = foo(1.0, 2.0)
          arktest.assertTrue(arr instanceof Array)
          arktest.assertTrue(arr[0][0] instanceof number && arr[2][1] instanceof number)
          arktest.assertEQ(arr[0][0], 1.0)
          arktest.assertEQ(arr[2][1], 2.0)
    - decl: |-
          function foo<T>(a: T, b: T): T[][] {
              return [[a, b], [a, b], [a, b]]
          }
      use: |-          
          let arr = foo(c'1', c'2')
          arktest.assertTrue(arr instanceof Array)
          arktest.assertTrue(arr[0][0] instanceof char && arr[2][1] instanceof char)
          arktest.assertEQ(arr[0][0], c'1')
          arktest.assertEQ(arr[2][1], c'2')
    - decl: |-
          function foo<T>(a: T, b: T): T[][] {
              return [[a, b], [a, b], [a, b]]
          }
      use: |-
          let arr = foo(true, false)
          arktest.assertTrue(arr instanceof Array)
          arktest.assertTrue(arr[0][0] instanceof boolean && arr[2][1] instanceof boolean)
          arktest.assertEQ(arr[0][0], true)
          arktest.assertEQ(arr[2][1], false)