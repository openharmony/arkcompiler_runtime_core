# Copyright (c) 2025-2026 Huawei Device Co., Ltd.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
---
cases:
    - use: |-
          let a: Record< "1"|"2"|"3"|"4"|"5", number> = {
              "1": 1,
              "2": 2,
              "3": 3,
              "4": 4,
              "5": 5,
              "6": 6
          } // CTE, extra key "6"
      expected: |-
          Semantic error ESE0046: Type '"6"' is not compatible with type '"1"|"2"|"3"|"4"|"5"' at index 1

    - use: |-
          let a: Record< "1"|"2"|"3"|"4"|"5", number> = {
              "1": 1,
              "2": 2,
              "3": 3,
              "4": 4,
          } // CTE, missing key "5"
      expected: |-
          Semantic error ESE0265: All variants of literals listed in the union type must be listed in the object literal

    - use: |-
          let a: Record<string, number> = {
              "1": 1,
              "2": 2,
              null: 3,
          } // CTE, wrong key
      expected: |-
          Semantic error ESE0046: Type '*ERROR_TYPE*' is not compatible with type 'String' at index 1

    - use: |-
          let a: Record<string, number> = {
              "1": 1,
              "2": 2,
              undefined: 3,
          } // CTE, wrong key
      expected: |-
          Semantic error ESE0046: Type '*ERROR_TYPE*' is not compatible with type 'String' at index 1

    - use: |-
          let a: Record<string, number> = {
              1: 1,
              "a": 2,
          } // CTE, wrong key type
      expected: |-
          Semantic error ESE0046: Type 'Int' is not compatible with type 'String' at index 1

    - use: |-
          let a: Record<number, number> = {
              1: 1,
              "a": 2,
          } // CTE, wrong key type
      expected: |-
          Semantic error ESE0046: Type '"a"' is not compatible with type 'Double' at index 1

    - use: |-
          let a: Record<number | boolean, number> = {
              1: 1,
              true: 2,
          } // CTE, wrong key type, boolean is not allowed
      expected: |-
          Semantic error ESE0046: Type '*ERROR_TYPE*' is not compatible with type 'Double|Boolean' at index 1

    - use: |-
          let a: Record<Error, string> = {} // CTE, wrong key type, Error is not allowed
      expected: |-
          Semantic error ESE0228: Type argument 'Error' should be a subtype of
          'Numeric|String|BaseEnum<Int>|BaseEnum<Long>|BaseEnum<String>' constraint

    - use: |-
          let a: Record<number, number> = {
              1: 1,
              2: "x",
          } // CTE, wrong value type
      expected: |-
          Semantic error ESE0046: Type '"x"' is not compatible with type 'Double' at index 2

    - use: |-
          let a: Record<number, string> = {
              1: "1",
              2: "x",
              3: null,
          } // CTE, wrong value type
      expected: |-
          Semantic error ESE0046: Type 'null' is not compatible with type 'String' at index 2

    - use: |-
          let a: Record<number, string> = {
              1: "1",
              2: "x",
              3: undefined,
          } // CTE, wrong value type
      expected: |-
          Semantic error ESE0046: Type 'undefined' is not compatible with type 'String' at index 2

    - use: |-
          let a: Record<string, number> = {
              "1": 1,
              "1": 2,
              "2": 3,
          } // CTE, duplicate key
      expected: |-
          Semantic error ESE0263: An object literal cannot multiple properties with same name

    - use: |-
          let a: Record<number, number> = {
              1: 1,
              1: 2,
              2: 3,
          } // CTE, duplicate key
      expected: |-
          Semantic error ESE0263: An object literal cannot multiple properties with same name

    - use: |-
          let a: Record<number, number> = {
              1: 1,
              2: 3,
          }
          let b = a["1"]  // CTE, wrong key type
      expected: |-
          Semantic error ESE0046: Type '"1"' is not compatible with type 'Double' at index 1

    - use: |-
          let a: Record<string, number> = {
              "1": 1,
              "2": 3,
          }
          let b = a[1]  // CTE, wrong key type
      expected: |-
          Semantic error ESE0046: Type 'Int' is not compatible with type 'String' at index 1

    - use: |-
          let a: Record<number | "10" | "2", string> = {
              1: "Jan",
              2: "Feb",
              "10": "Dec",
          }  // CTE, missing required key
      expected: |-
          Semantic error ESE0265: All variants of literals
          listed in the union type must be listed in the object literal

    - use: |-
          let a: Record<"10" | "1", string> = {
              "1": "Jan",
              "10": "Dec",
          }
          let b = a["2"]  // CTE, wrong key
      expected: |-
          Semantic error ESE0046: Type '"2"' is not compatible with type '"10"|"1"' at index 1

    - use: |-
          let a: Record<"10" | "1", string> = {
              "1": "Jan",
              "10": "Dec",
          }
          let b = a[2]  // CTE, wrong key
      expected: |-
          Semantic error ESE0046: Type 'Int' is not compatible with type '"10"|"1"' at index 1

    - decl: |-
          enum Season { Spring, Summer, Autumn, Winter }
      use: |-
          let a: Record<Season, string> = {
              Season.Spring: "spring",
              Season.Summer: "summer",
              Season.Winter: "winter",
          } // CTE, missing Season.Autumn
      expected: |-
          Semantic error ESE0265: All variants of literals listed in the enum type must be listed in the object literal

    - use: |-
          let a: Record<number, string> = {
              1: "one",
              1.0: "one point zero",
          } // CTE, duplicate key
      expected: |-
          Semantic error ESE0263: An object literal cannot multiple properties with same name
